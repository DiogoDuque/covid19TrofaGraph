(this["webpackJsonpcovid19-trofa-graph"]=this["webpackJsonpcovid19-trofa-graph"]||[]).push([[0],{211:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(74),i=n.n(r),c=(n(89),n(50)),s=n(224),u=n(28),l=n(6),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(u.a)(this,t),this._confirmedPt=void 0,this._confirmedNorth=void 0,this._confirmedPt=e,this._confirmedNorth=n}return Object(l.a)(t,[{key:"confirmedPt",get:function(){return this._confirmedPt}},{key:"confirmedNorth",get:function(){return this._confirmedNorth}}]),t}(),h=n(29),m=n(48),f=n.n(m);var p=function(){function t(e,n){Object(u.a)(this,t),this._dateStr=void 0,this._count=void 0,this._dateStr=e,this._count="number"===typeof n?n:parseInt(n),isNaN(this._count)&&(this._count=0)}return Object(l.a)(t,[{key:"dateStr",get:function(){return this._dateStr}},{key:"count",get:function(){return this._count}}]),t}();function g(t){var e="https://cors-anywhere.herokuapp.com/https://github.com/dssg-pt/covid19pt-data/raw/master/"+t,n=new Headers({"Content-Type":"application/x-www-form-urlencoded",Origin:"https://github.com",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"});return console.log("Fetching "+t),fetch(e,{method:"GET",headers:n})}function v(t,e){g("data_concelhos.csv").then((function(t){if(t&&200===t.status)return t.text()})).then((function(n){var a=[],o=new h.Readable;o.push(n),o.push(null),o.pipe(f()()).on("data",(function(e){return a.push(new p(e.data,e[t]))})).on("end",(function(){return e(a)}))})).catch((function(t){return console.error(t)}))}function b(t){g("data.csv").then((function(t){if(t&&200===t.status)return t.text()})).then((function(e){var n=[],a=[],o=new h.Readable;o.push(e),o.push(null),o.pipe(f()()).on("data",(function(t){n.push(new p(t.data,t.confirmados_arsnorte)),a.push(new p(t.data,t.confirmados))})).on("end",(function(){return t(new d(a,n))}))})).catch((function(t){return console.error(t)}))}var C=n(226),E=n(222),w=n(77);function x(t,e){var n=t.length;return n<=e?t:t.slice(n-e)}function _(t,e,n){return{datasets:[Object(w.a)({label:e,fill:!0,lineTension:.1,pointBackgroundColor:"#fff",pointHoverBorderColor:"rgba(220,220,220,1)",pointBorderWidth:1,pointHoverRadius:5,data:t.map((function(t){return t.count}))},n)],labels:t.map((function(t){return t.dateStr}))}}function k(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:t,suggestedMin:e,suggestedMax:n}}]}}}function O(t,e){return o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement("div",{className:e.chartContainer},t))}var y=n(19),j=n(80),N=function(t){var e=t.data,n=t.datapointsCount,a=t.label,r=t.theme,i=x(e,n),c=Math.min.apply(Math,Object(y.a)(i.map((function(t){return t.count})))),s=Math.max.apply(Math,Object(y.a)(i.map((function(t){return t.count})))),u=Math.max(s-c,20),l=Math.max(Math.round(c-u/10),0),d=Math.round(s+u/10);return o.a.createElement(j.a,{data:_(i,"".concat(a," (").concat(n," dias)"),r),options:k(!1,l,d)})},P={backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",pointBorderColor:"rgba(75,192,192,1)",pointHoverBackgroundColor:"rgba(75,192,192,1)"},B={backgroundColor:"rgba(192,192,75,0.4)",borderColor:"rgba(192,192,75,1)",pointBorderColor:"rgba(192,192,75,1)",pointHoverBackgroundColor:"rgba(192,192,75,1)"},M=function(t){var e=t.trofaEntries,n=t.ptEntries,a=t.classes;return o.a.createElement("div",null,o.a.createElement(C.a,{variant:"h3",style:{textAlign:"center"},gutterBottom:!0},"Casos confirmados"),o.a.createElement(E.a,{container:!0,spacing:3},O(o.a.createElement(N,{data:e,datapointsCount:30,label:"Casos confirmados na Trofa",theme:P}),a),O(o.a.createElement(N,{data:n.confirmedNorth,datapointsCount:30,label:"Casos confirmados no Norte",theme:P}),a),O(o.a.createElement(N,{data:n.confirmedPt,datapointsCount:30,label:"Casos confirmados em Portugal",theme:P}),a),O(o.a.createElement(N,{data:n.confirmedPt,datapointsCount:90,label:"Casos confirmados em Portugal",theme:P}),a)))};var S=function(t){var e=t.trofaEntries,n=t.ptEntries,a=t.classes;return e=function(t){for(var e=[],n=t[0],a=1;a<t.length;a++){var o=t[a];e.push(new p(o.dateStr,o.count-n.count)),n=o}return e}(e),o.a.createElement("div",null,o.a.createElement(C.a,{variant:"h3",style:{textAlign:"center"},gutterBottom:!0},"Casos novos"),o.a.createElement(E.a,{container:!0,spacing:3},O(o.a.createElement(N,{data:e,datapointsCount:30,label:"Casos novos na Trofa",theme:B}),a),O(o.a.createElement(N,{data:n.confirmedNorth,datapointsCount:30,label:"Casos novos no Norte",theme:B}),a),O(o.a.createElement(N,{data:n.confirmedPt,datapointsCount:30,label:"Casos novos em Portugal",theme:B}),a),O(o.a.createElement(N,{data:n.confirmedPt,datapointsCount:90,label:"Casos novos em Portugal",theme:B}),a)))},A=Object(s.a)((function(t){return{root:{flexGrow:1,marginLeft:10,marginRight:30},chartContainer:{position:"relative",margin:"auto",height:"50vh",width:"90vw"}}})),R=function(){var t=A(),e=Object(a.useState)([]),n=Object(c.a)(e,2),r=n[0],i=n[1],s=Object(a.useState)(new d),u=Object(c.a)(s,2),l=u[0],h=u[1];return Object(a.useEffect)((function(){v("TROFA",i),b(h)}),[]),o.a.createElement("div",{className:t.root},o.a.createElement(M,{trofaEntries:r,ptEntries:l,classes:t}),o.a.createElement(S,{trofaEntries:r,ptEntries:l,classes:t}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},84:function(t,e,n){t.exports=n(211)},89:function(t,e,n){},92:function(t,e){},94:function(t,e){}},[[84,1,2]]]);
//# sourceMappingURL=main.210f9592.chunk.js.map