(this["webpackJsonpcovid19-trofa-graph"]=this["webpackJsonpcovid19-trofa-graph"]||[]).push([[0],{212:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(75),i=n.n(r),c=(n(90),n(35)),s=n(230),l=n(228),u=n(229),d=n(232),m=n(231),h=n(31),f=n(8),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(h.a)(this,t),this._confirmedPt=void 0,this._confirmedNorth=void 0,this._newConfirmedPt=void 0,this._confirmedPt=e,this._confirmedNorth=n,this._newConfirmedPt=a}return Object(f.a)(t,[{key:"confirmedPt",get:function(){return this._confirmedPt}},{key:"confirmedNorth",get:function(){return this._confirmedNorth}},{key:"newConfirmedPt",get:function(){return this._newConfirmedPt}}]),t}(),g=n(32),b=n(51),v=n.n(b),E=function(){function t(e,n){Object(h.a)(this,t),this._dateStr=void 0,this._count=void 0,this._dateStr=e,this._count="number"===typeof n?n:parseInt(n),isNaN(this._count)&&(this._count=0)}return Object(f.a)(t,[{key:"dateStr",get:function(){return this._dateStr}},{key:"count",get:function(){return this._count}}]),t}();function C(t){var e="https://cors-anywhere.herokuapp.com/https://github.com/dssg-pt/covid19pt-data/raw/master/"+t,n=new Headers({"Content-Type":"application/x-www-form-urlencoded",Origin:"https://github.com",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"});return console.log("Fetching "+t),fetch(e,{method:"GET",headers:n})}function w(t,e){C("data_concelhos.csv").then((function(t){if(t&&200===t.status)return t.text()})).then((function(n){var a=[],o=new g.Readable;o.push(n),o.push(null),o.pipe(v()()).on("data",(function(e){return a.push(new E(e.data,e[t]))})).on("end",(function(){return e(a)}))})).catch((function(t){return console.error(t)}))}function P(t){C("data.csv").then((function(t){if(t&&200===t.status)return t.text()})).then((function(e){var n=[],a=[],o=[],r=new g.Readable;r.push(e),r.push(null),r.pipe(v()()).on("data",(function(t){n.push(new E(t.data,t.confirmados)),a.push(new E(t.data,t.confirmados_arsnorte)),o.push(new E(t.data,t.confirmados_novos))})).on("end",(function(){return t(new p(n,a,o))}))})).catch((function(t){return console.error(t)}))}var y=n(226),_=n(78);function x(t,e){var n=t.length;return n<=e?t:t.slice(n-e)}function O(t){for(var e=t[0],n=[new E(e.dateStr,0)],a=1;a<t.length;a++){var o=t[a];n.push(new E(o.dateStr,o.count-e.count)),e=o}return n}function k(t,e,n){return{datasets:[Object(_.a)({label:e,fill:!0,categoryPercentage:1,barPercentage:.95,lineTension:.1,borderWidth:2,pointBackgroundColor:"#fff",pointHoverBorderColor:"rgba(220,220,220,1)",pointBorderWidth:1,pointHoverRadius:5,data:t.map((function(t){return t.count}))},n)],labels:t.map((function(t){return t.dateStr}))}}function j(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:t,suggestedMin:e,suggestedMax:n}}]}}}function N(t,e){return o.a.createElement(y.a,{item:!0,xs:12},o.a.createElement("div",{className:e.chartContainer},t))}var B=n(22),S=n(81),M=function(t){var e=t.data,n=t.datapointsCount,a=t.dateRange,r=t.label,i=t.theme,c=t.zeroBased,s=x(e,n),l=Math.min.apply(Math,Object(B.a)(s.map((function(t){return t.count})))),u=Math.max.apply(Math,Object(B.a)(s.map((function(t){return t.count})))),d=Math.max((u-l)/20,c?4:2),m=Math.round(u+d),h=Math.round(l-d);return c&&(h=Math.max(h,0)),o.a.createElement(S.a,{data:k(s,"".concat(r," (").concat(a||n," dias)"),i),options:j(!1,h,m)})};M.defaultProps={zeroBased:!0,dateRange:0};var R=M,A={backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",pointBorderColor:"rgba(75,192,192,1)",pointHoverBackgroundColor:"rgba(75,192,192,1)"},T={backgroundColor:"rgba(192,192,75,0.4)",borderColor:"rgba(192,192,75,1)",pointBorderColor:"rgba(192,192,75,1)",pointHoverBackgroundColor:"rgba(192,192,75,1)"},q=function(t){var e=t.trofaEntries,n=t.ptEntries,a=t.classes;return o.a.createElement("div",null,o.a.createElement(l.a,{variant:"h3",style:{textAlign:"center"},gutterBottom:!0},"Casos confirmados"),o.a.createElement(y.a,{container:!0,spacing:3},N(o.a.createElement(R,{data:e,datapointsCount:14,dateRange:90,label:"Casos confirmados na Trofa",theme:A}),a),N(o.a.createElement(R,{data:n.confirmedNorth,datapointsCount:30,label:"Casos confirmados no Norte",theme:A}),a),N(o.a.createElement(R,{data:n.confirmedPt,datapointsCount:30,label:"Casos confirmados em Portugal",theme:A}),a),N(o.a.createElement(R,{data:n.confirmedPt,datapointsCount:90,label:"Casos confirmados em Portugal",theme:A}),a)))},H=function(t){var e=t.trofaEntries,n=t.northEntries,a=t.ptEntries,r=t.classes;return o.a.createElement("div",null,o.a.createElement(l.a,{variant:"h3",style:{textAlign:"center"},gutterBottom:!0},"Casos novos"),o.a.createElement(y.a,{container:!0,spacing:3},N(o.a.createElement(R,{data:e,datapointsCount:30,label:"Casos novos na Trofa",theme:T}),r),N(o.a.createElement(R,{data:n,datapointsCount:30,label:"Casos novos no Norte",theme:T}),r),N(o.a.createElement(R,{data:a.newConfirmedPt,datapointsCount:30,label:"Casos novos em Portugal",theme:T}),r),N(o.a.createElement(R,{data:a.newConfirmedPt,datapointsCount:90,label:"Casos novos em Portugal",theme:T}),r)))},W=Object(u.a)((function(t){return{root:{backgroundColor:"#f5f5f5",flexGrow:1,display:"flex","align-items":"center","justify-content":"center",padding:15,paddingRight:30},chartContainer:{position:"relative",margin:"auto",height:"50vh",width:"90vw"},progress:{float:"none",margin:"0 auto"}}})),z=function(){var t=W(),e=Object(a.useState)(!0),n=Object(c.a)(e,2),r=n[0],i=n[1],u=Object(a.useState)([]),h=Object(c.a)(u,2),f=h[0],g=h[1],b=Object(a.useState)(new p),v=Object(c.a)(b,2),E=v[0],C=v[1],y="",_="",x=[],k=[];return r||(y=f[f.length-1].dateStr,_=E.confirmedPt[E.confirmedPt.length-1].dateStr,x=O(f),k=O(E.confirmedNorth),O(x),O(k),O(E.newConfirmedPt)),Object(a.useEffect)((function(){w("TROFA",g),P(C)}),[]),r&&f.length>0&&E.confirmedPt.length>0&&i(!1),o.a.createElement("div",{className:t.root},r?o.a.createElement(s.a,{className:t.progress}):o.a.createElement("div",null,o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement(l.a,{variant:"body2",component:"p"},"A \xfaltima atualiza\xe7\xe3o destes dados ocorreu nas seguintes datas: ","Portugal/Norte => ".concat(_,", Trofa => ").concat(y),".",o.a.createElement("br",null)))),o.a.createElement("br",null),o.a.createElement(q,{trofaEntries:f,ptEntries:E,classes:t}),o.a.createElement("br",null),o.a.createElement(H,{trofaEntries:x,northEntries:k,ptEntries:E,classes:t}),o.a.createElement("br",null),o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement(l.a,{variant:"body2",component:"p"},"Os dados aqui apresentados s\xe3o extra\xeddos do reposit\xf3rio ",o.a.createElement("a",{href:"https://github.com/dssg-pt/covid19pt-data"},"dssg-pt/covid19pt-data"),".",o.a.createElement("br",null),"O c\xf3digo para este dashboard pode ser consultado ",o.a.createElement("a",{href:"https://github.com/DiogoDuque/covid19TrofaGraph"},"aqui"),".",o.a.createElement("br",null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},85:function(t,e,n){t.exports=n(212)},90:function(t,e,n){},93:function(t,e){},95:function(t,e){}},[[85,1,2]]]);
//# sourceMappingURL=main.aaa067f5.chunk.js.map