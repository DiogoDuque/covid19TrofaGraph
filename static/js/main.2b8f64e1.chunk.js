(this["webpackJsonpcovid19-trofa-graph"]=this["webpackJsonpcovid19-trofa-graph"]||[]).push([[0],{103:function(e,t,a){e.exports=a(229)},108:function(e,t,a){},111:function(e,t){},113:function(e,t){},229:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=(a(108),a(27)),s=a(263),u=a(264),l=a(265),d=a(270),h=a(268),m=a(269),g=a(261),f=a(262),p=a(266),v=a(267),b=a(29),E=a(13),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];Object(b.a)(this,e),this._confirmedPt=void 0,this._confirmedNorth=void 0,this._newConfirmedPt=void 0,this._activePt=void 0,this._hospitalized=void 0,this._icu=void 0,this._confirmedPt=t,this._confirmedNorth=a,this._newConfirmedPt=n,this._activePt=r,this._hospitalized=o,this._icu=i}return Object(E.a)(e,[{key:"confirmedPt",get:function(){return this._confirmedPt}},{key:"confirmedNorth",get:function(){return this._confirmedNorth}},{key:"newConfirmedPt",get:function(){return this._newConfirmedPt}},{key:"activePt",get:function(){return this._activePt}},{key:"hospitalized",get:function(){return this._hospitalized}},{key:"hospitalizedIcu",get:function(){return this._icu}}]),e}(),_=a(52),w=a(67),y=a.n(w);var k=function(){function e(t,a){Object(b.a)(this,e),this._dateStr=void 0,this._date=void 0,this._count=void 0,this._dateStr=t,this._date=function(e){var t=e.split("-");return new Date(Number(t[2]),Number(t[1]),Number(t[0]))}(t),this._count="number"===typeof a?a:parseInt(a),isNaN(this._count)&&(this._count=0)}return Object(E.a)(e,[{key:"dateStr",get:function(){return this._dateStr}},{key:"date",get:function(){return this._date}},{key:"count",get:function(){return this._count}}]),e}();function P(e){var t="https://raw.githubusercontent.com/dssg-pt/covid19pt-data/master/"+e,a=new Headers({Accept:"application/vnd.github.v3+json"});return console.log("[_getDataFromSource] Fetching "+e),fetch(t,{method:"GET",headers:a})}function B(e,t){P("data_concelhos_incidencia.csv").then((function(e){if(e&&200===e.status)return e.text()})).then((function(a){var n=[],r=new _.Readable;r.push(a),r.push(null),r.pipe(y()()).on("data",(function(t){return n.push(new k(t.data,t[e]))})).on("end",(function(){return t(n)}))})).catch((function(e){return console.error(e)}))}function O(e){P("data.csv").then((function(e){if(e&&200===e.status)return e.text()})).then((function(t){var a=[],n=[],r=[],o=[],i=[],c=[],s=new _.Readable;s.push(t),s.push(null),s.pipe(y()()).on("data",(function(e){a.push(new k(e.data,e.confirmados)),n.push(new k(e.data,e.confirmados_arsnorte)),r.push(new k(e.data,e.confirmados_novos)),o.push(new k(e.data,e.ativos)),i.push(new k(e.data,e.internados)),c.push(new k(e.data,e.internados_uci))})).on("end",(function(){return e(new C(a,n,r,o,i,c))}))})).catch((function(e){return console.error(e)}))}var j=a(68),R=a(257);function M(e,t){var a=new Date;return a.setDate(a.getDate()-e),t.filter((function(e){return e.date>=a}))}function x(e){for(var t=e[0],a=[new k(t.dateStr,0)],n=1;n<e.length;n++){var r=e[n];a.push(new k(r.dateStr,r.count-t.count)),t=r}return a}function N(e,t,a){return{datasets:[Object(j.a)({label:t,categoryPercentage:1,barPercentage:.95,lineTension:.1,borderWidth:2,pointBackgroundColor:"#fff",pointHoverBorderColor:"rgba(220,220,220,1)",pointBorderWidth:1,pointHoverRadius:5,data:e.map((function(e){return e.count}))},a)],labels:e.map((function(e){return e.dateStr}))}}function S(e,t,a){return{datasets:Array.from(Array(e.length).keys()).map((function(n){return Object(j.a)({label:t[n],categoryPercentage:1,barPercentage:.95,lineTension:.1,borderWidth:2,pointBackgroundColor:"#fff",pointHoverBorderColor:"rgba(220,220,220,1)",pointBorderWidth:1,pointHoverRadius:5,data:e[n].map((function(e){return e.count}))},a[n])})),labels:e[0].map((function(e){return e.dateStr}))}}function z(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:e,suggestedMin:t,suggestedMax:a}}]}}}var A=0;function H(e,t){return r.a.createElement(R.a,{item:!0,xs:12,key:A++},r.a.createElement("div",{className:t.chartContainer},e))}var D=function(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),o=2;o<a;o++)n[o-2]=arguments[o];return r.a.createElement("div",null,r.a.createElement(g.a,{variant:"h3",style:{textAlign:"center"},gutterBottom:!0},e),r.a.createElement(R.a,{container:!0,spacing:3},n.map((function(e){return H(e,t)}))))},I=a(10),T=a(41),W=function(e){var t=e.data,a=e.dateRange,n=e.label,o=e.theme,i=e.zeroBased,c=M(a,t),s=Math.min.apply(Math,Object(I.a)(c.map((function(e){return e.count})))),u=Math.max.apply(Math,Object(I.a)(c.map((function(e){return e.count})))),l=Math.max((u-s)/20,i?4:2),d=Math.round(u+l),h=Math.round(s-l);return i&&(h=Math.max(h,0)),r.a.createElement(T.a,{data:N(c,n,o),options:z(i,h,d)})};W.defaultProps={zeroBased:!0,dateRange:0};var q=W,F={backgroundColor:"rgba(192,75,192,0.4)",borderColor:"rgba(192,75,192,1)",pointBorderColor:"rgba(192,75,192,1)",pointHoverBackgroundColor:"rgba(192,75,192,1)"},G={backgroundColor:"rgba(217, 128, 217,0.4)",borderColor:"rgba(217, 128, 217,1)",pointBorderColor:"rgba(217, 128, 217,1)",pointHoverBackgroundColor:"rgba(217, 128, 217,1)"},J={backgroundColor:"rgba(140, 83, 140,0.4)",borderColor:"rgba(140, 83, 140,1)",pointBorderColor:"rgba(1140, 83, 140,1)",pointHoverBackgroundColor:"rgba(140, 83, 140,1)"},U={backgroundColor:"rgba(192,192,75,0.4)",borderColor:"rgba(192,192,75,1)",pointBorderColor:"rgba(192,192,75,1)",pointHoverBackgroundColor:"rgba(192,192,75,1)"},Z=function(e){var t=e.trofaEntries,a=e.northEntries,n=e.ptEntries,o=e.dateRange,i=e.classes;return D("Casos novos",i,r.a.createElement(q,{data:t,dateRange:o,label:"Casos novos na Trofa [por 100k hab.]",theme:U}),r.a.createElement(q,{data:a,dateRange:o,label:"Casos novos no Norte",theme:U}),r.a.createElement(q,{data:n.newConfirmedPt,dateRange:o,label:"Casos novos em Portugal",theme:U}))},$=function(e){var t=e.dataArray,a=e.dateRange,n=e.labels,o=e.themes,i=e.zeroBased,c=t.map((function(e){return M(a,e)})),s=c.flatMap((function(e){return e.map((function(e){return e.count}))})),u=Math.min.apply(Math,Object(I.a)(s)),l=Math.max.apply(Math,Object(I.a)(s)),d=Math.max((l-u)/20,i?4:2),h=Math.round(l+d),m=Math.round(u-d);return i&&(m=Math.max(m,0)),console.log(s),console.log("".concat(m,", ").concat(h)),t.length!==n.length||n.length!==o.length?(console.error("Chart arguments cardinality did not match!"),r.a.createElement(T.a,{options:z(!1,m,h)})):r.a.createElement(T.a,{data:S(c,n,o),options:z(i,m,h)})};$.defaultProps={zeroBased:!0,dateRange:0};var K=$,L=function(e){var t=e.ptEntries,a=e.dateRange,n=e.classes;return D("Casos ativos",n,r.a.createElement(q,{data:t.activePt,dateRange:a,label:"Casos ativos em Portugal",theme:F,zeroBased:!0}),r.a.createElement(K,{dataArray:[t.hospitalized,t.hospitalizedIcu],dateRange:a,labels:["Internados em Portugal","Internados em UCI em Portugal"],themes:[G,J],zeroBased:!0}))},Q=Object(f.a)((function(){return{root:{backgroundColor:"#f5f5f5",flexGrow:1,display:"flex","align-items":"center","justify-content":"center",padding:15,paddingRight:30},chartContainer:{position:"relative",margin:"auto",height:"50vh",width:"90vw"},progress:{float:"none",margin:"0 auto"},appBar:{maxWidth:170,marginBottom:20,backgroundColor:"#e0e0e0"},formControl:{margin:10}}})),V=function(){var e=Q(),t=Object(n.useState)(!0),a=Object(c.a)(t,2),o=a[0],i=a[1],f=Object(n.useState)(90),b=Object(c.a)(f,2),E=b[0],_=b[1],w=Object(n.useState)([]),y=Object(c.a)(w,2),k=y[0],P=y[1],j=Object(n.useState)(new C),R=Object(c.a)(j,2),M=R[0],N=R[1],S="",z="",A=[];return o||(S=k[k.length-1].dateStr,z=M.confirmedPt[M.confirmedPt.length-1].dateStr,A=x(M.confirmedNorth)),Object(n.useEffect)((function(){B("TROFA",P),O(N)}),[]),o&&k.length>0&&M.confirmedPt.length>0&&i(!1),r.a.createElement("div",{className:e.root},o?r.a.createElement(s.a,{className:e.progress}):r.a.createElement("div",null,r.a.createElement(u.a,{position:"sticky",className:e.appBar},r.a.createElement(l.a,{className:e.formControl},r.a.createElement(d.a,{id:"time-label"},"Tempo"),r.a.createElement(h.a,{labelId:"time-label",id:"time-select",value:E,onChange:function(e){return _(e.target.value)}},r.a.createElement(m.a,{value:30},"30 dias"),r.a.createElement(m.a,{value:90},"90 dias"),r.a.createElement(m.a,{value:999999},"Desde sempre")))),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{variant:"body2",component:"p"},"A \xfaltima atualiza\xe7\xe3o destes dados ocorreu nas seguintes datas: ","Portugal/Norte => ".concat(z,", Trofa => ").concat(S),".",r.a.createElement("br",null)))),r.a.createElement("br",null),r.a.createElement(L,{ptEntries:M,dateRange:E,classes:e}),r.a.createElement("br",null),r.a.createElement(Z,{trofaEntries:k,dateRange:E,northEntries:A,ptEntries:M,classes:e}),r.a.createElement("br",null),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{variant:"body2",component:"p"},"Os dados aqui apresentados s\xe3o extra\xeddos do reposit\xf3rio ",r.a.createElement("a",{href:"https://github.com/dssg-pt/covid19pt-data"},"dssg-pt/covid19pt-data"),".",r.a.createElement("br",null),"O c\xf3digo para este dashboard pode ser consultado ",r.a.createElement("a",{href:"https://github.com/DiogoDuque/covid19TrofaGraph"},"aqui"),".",r.a.createElement("br",null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[103,1,2]]]);
//# sourceMappingURL=main.2b8f64e1.chunk.js.map